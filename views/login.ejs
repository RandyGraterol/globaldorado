<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Acceder</title>
    <link rel="icon" type="image/x-icon" href="/template2/assets/favicon.ico"/>
    <!-- Font Awesome icons (free version)-->
    <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
    <!-- Google fonts-->
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link href="https://fonts.googleapis.com/css2?family=Tinos:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,wght@0,400;0,500;0,700;1,400;1,500;1,700&amp;display=swap" rel="stylesheet" />
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="/template2/css/styles.css" rel="stylesheet" />
     <link rel="icon" type="image/x-icon" href="/template/icon/corona.png" />
    <link rel="stylesheet" type="text/css" href="/template2/css/main.css">
    <script type="text/javascript" src="/js/alertConfig.js"></script>
</head>
<body>
    <!-- Background Video-->
    <video style="display:block" class="bg-video" playsinline="playsinline" autoplay="autoplay" muted="muted" loop="loop"><source src="/template2/assets/mp4/bg.mp4" type="video/mp4" /></video>


    <!-- Masthead-->
    <div class="masthead ocultar">
        <div class="masthead-content text-white">
            <div class="container-fluid px-4 px-lg-0">
                <h1 class="fst-italic lh-1 mb-4 h11">Iniciar<span style='color:rgb(255, 183, 67)'> Sesion</span></h1>
                <p class="mb-5"></p>

                <form id="contactForm">
                    <!-- Email address input-->
                    <div class="row input-group-newsletter">

                        <div class="col">
                            <input class="form-control" id="email" name="correo" type="email" placeholder="Ingresa tu correo" aria-label="Enter email address..." data-sb-validations="required,email" />
                        </div>

                        <div class="col">
                            <input class="form-control" name="contrasena" id="password" type="password" placeholder="Ingresa la contraseña" aria-label="Enter email address..." data-sb-validations="required,email" />
                        </div>
                        
                        <div class='botones'>

                           <div class="col-auto">
                           <button class='acceder'>Acceder</button>
                           <button class="volver acceder">volver</button>
                           </div>
                        
                        </div>
      
     
                    </div>

                    

                    <div class="invalid-feedback mt-2" data-sb-feedback="email:required">An email is required.
                    </div>

                    <div class="invalid-feedback mt-2" data-sb-feedback="email:email">Email is not valid.
                    </div>
                    <!-- Submit success message-->
                    <!---->
                    <!-- This is what your users will see when the form-->
                    <!-- has successfully submitted-->
                    <div class="d-none" id="submitSuccessMessage">
                        <div class="text-center mb-3 mt-2">
                            <div class="fw-bolder">Form submission successful!</div>
                            To activate this form, sign up at
                            <br />
                            <a href="https://startbootstrap.com/solution/contact-forms">https://startbootstrap.com/solution/contact-forms</a>
                        </div>
                    </div>
                    <!-- Submit error message-->
                    <!---->
                    <!-- This is what your users will see when there is-->
                    <!-- an error submitting the form-->
                    <div class="d-none" id="submitErrorMessage"><div class="text-center text-danger mb-3 mt-2">Error sending message!</div></div>
                </form>
                <div class='restablecer-registro'>
                        <div class='restablecer-registro-interno'>
                        <p>¿Haz olvidado tu contraseña?</p>
                        <a href="/restablecer">Haz click aqui</a>
                        </div> 
                    </div>
            </div>
        </div>
    </div>
    <!-- Social Icons-->
    <!-- For more icon options, visit https://fontawesome.com/icons?d=gallery&p=2&s=brands-->
    <div class="social-icons ocultar">
        <div class="d-flex flex-row flex-lg-column justify-content-center align-items-center h-100 mt-3 mt-lg-0">
            <a class="btn btn-dark m-3" href="#"><i class="fab fa-twitter"></i></a>
            <a class="btn btn-dark m-3" href="#"><i class="fab fa-facebook-f"></i></a>
            <a class="btn btn-dark m-3" href="#"><i class="fab fa-instagram"></i></a>
        </div>
    </div>
    <!-- Bootstrap core JS-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Core theme JS-->
    <script src="/template2/js/scripts.js"></script>
    <!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->
    <!-- * *                               SB Forms JS                               * *-->
    <!-- * * Activate your form at https://startbootstrap.com/solution/contact-forms * *-->
    <!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->
    
    <script type="text/javascript" src='/js/alert.js'></script>
    <script type="text/javascript">
        const formulario = document.getElementById('contactForm');
        formulario.addEventListener('submit',(e)=>{
        e.preventDefault();
        const data = new FormData(formulario);
        const correo = data.get('correo');
        const contrasena = data.get('contrasena');

        fetch('/login',{
            method:'post',
            headers:{
            'Content-Type':'application/json'
            },
            body:JSON.stringify({correo,contrasena})
        })
        .then(res=>res.json())
        .then(respuesta =>{
         if(!respuesta.interruptor){
          alert('¡Correo o Contraseña Incorrectos , vuelve a intentarlo!')
         }else{
            window.location.href='/main';
         }
        })


        });
       
        const volver = document.querySelector('.volver');
        volver.addEventListener('click',(e)=>{
        e.preventDefault();
        window.location.href='/';
        })
    </script>
</body>
</html>
